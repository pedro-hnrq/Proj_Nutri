{% extends 'base_plataforma.html' %}
{% load static %}
{% block 'titulo' %}Plano Alimentar| NUTRE LIFE{% endblock %}
{% block 'plataforma' %}

    {% if messages %}
        <br>
        {% for message in messages %}
            <div class="alert {{message.tags}}">
                {{message}}
            </div>
        {% endfor %}
    {% endif %}
    <br>

    <div class="row">

        <div class="col-md-3">
                {% if paciente.sexo == "M" %}
                <img src="{% static 'plataforma/img/contato_m.png' %}" width="85px" height="110px">
            {% else %}
                <img src="{% static 'plataforma/img/contato_f.png' %}" width="85px" height="110px">
            {% endif %}
        </div>

        <div class="col-md-3 dados descricao">
            <h5 class="dados" style="font-family: 'Zen Dots', cursive;">{{paciente.nome}}</h5>
            <h6 class="dados">{{paciente.idade}} Anos</h6>
        </div>

    </div>
    <hr>


    <button type="button" onclick="exibe_refeicao()" class="btn btn-outline-success" data-toggle="modal" data-target="#modal">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-clipboard2-plus" viewBox="0 0 16 16">
  <path d="M9.5 0a.5.5 0 0 1 .5.5.5.5 0 0 0 .5.5.5.5 0 0 1 .5.5V2a.5.5 0 0 1-.5.5h-5A.5.5 0 0 1 5 2v-.5a.5.5 0 0 1 .5-.5.5.5 0 0 0 .5-.5.5.5 0 0 1 .5-.5h3Z"/>
  <path d="M3 2.5a.5.5 0 0 1 .5-.5H4a.5.5 0 0 0 0-1h-.5A1.5 1.5 0 0 0 2 2.5v12A1.5 1.5 0 0 0 3.5 16h9a1.5 1.5 0 0 0 1.5-1.5v-12A1.5 1.5 0 0 0 12.5 1H12a.5.5 0 0 0 0 1h.5a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5v-12Z"/>
  <path d="M8.5 6.5a.5.5 0 0 0-1 0V8H6a.5.5 0 0 0 0 1h1.5v1.5a.5.5 0 0 0 1 0V9H10a.5.5 0 0 0 0-1H8.5V6.5Z"/>
</svg> Nova refeição
    </button>

    <button type="button" onclick="exibe_opcao()" class="btn btn-outline-primary" ><a href="{% url 'gera_pdf' paciente.id %}" >
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-file-earmark-pdf-fill" viewBox="0 0 16 16">
  <path d="M5.523 12.424c.14-.082.293-.162.459-.238a7.878 7.878 0 0 1-.45.606c-.28.337-.498.516-.635.572a.266.266 0 0 1-.035.012.282.282 0 0 1-.026-.044c-.056-.11-.054-.216.04-.36.106-.165.319-.354.647-.548zm2.455-1.647c-.119.025-.237.05-.356.078a21.148 21.148 0 0 0 .5-1.05 12.045 12.045 0 0 0 .51.858c-.217.032-.436.07-.654.114zm2.525.939a3.881 3.881 0 0 1-.435-.41c.228.005.434.022.612.054.317.057.466.147.518.209a.095.095 0 0 1 .026.064.436.436 0 0 1-.06.2.307.307 0 0 1-.094.124.107.107 0 0 1-.069.015c-.09-.003-.258-.066-.498-.256zM8.278 6.97c-.04.244-.108.524-.2.829a4.86 4.86 0 0 1-.089-.346c-.076-.353-.087-.63-.046-.822.038-.177.11-.248.196-.283a.517.517 0 0 1 .145-.04c.013.03.028.092.032.198.005.122-.007.277-.038.465z"/>
  <path fill-rule="evenodd" d="M4 0h5.293A1 1 0 0 1 10 .293L13.707 4a1 1 0 0 1 .293.707V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm5.5 1.5v2a1 1 0 0 0 1 1h2l-3-3zM4.165 13.668c.09.18.23.343.438.419.207.075.412.04.58-.03.318-.13.635-.436.926-.786.333-.401.683-.927 1.021-1.51a11.651 11.651 0 0 1 1.997-.406c.3.383.61.713.91.95.28.22.603.403.934.417a.856.856 0 0 0 .51-.138c.155-.101.27-.247.354-.416.09-.181.145-.37.138-.563a.844.844 0 0 0-.2-.518c-.226-.27-.596-.4-.96-.465a5.76 5.76 0 0 0-1.335-.05 10.954 10.954 0 0 1-.98-1.686c.25-.66.437-1.284.52-1.794.036-.218.055-.426.048-.614a1.238 1.238 0 0 0-.127-.538.7.7 0 0 0-.477-.365c-.202-.043-.41 0-.601.077-.377.15-.576.47-.651.823-.073.34-.04.736.046 1.136.088.406.238.848.43 1.295a19.697 19.697 0 0 1-1.062 2.227 7.662 7.662 0 0 0-1.482.645c-.37.22-.699.48-.897.787-.21.326-.275.714-.08 1.103z"/>
</svg> Exportar refeição</a>
    </button>
    <br>
    <br>

    <div class="fundo-alimentar">

        {% for re in refeicao %}
        <div class="refeicao">
            <div class="head-refeicao">
                <span>{{re.titulo}}</span>

                <span style="float: right;">{{re.horario}}</span>

            </div>

            <div class="body-refeicao">
                {% for o1 in opcao %}
                    {% if o1.refeicao == re %}
                        <div class="opcao">
                            <div class="row">
                                <div class="col-md-2">
<!--                                    {% if paciente.sexo == "M" %}-->
<!--                                        <img src="{% static 'plataforma/img/contato_m.png' %}" width="85px" height="110px">-->
<!--                                    {% else %}-->
<!--                                        <img src="{% static 'plataforma/img/contato_f.png' %}" width="85px" height="110px">-->
<!--                                    {% endif %}-->
                                     <img src="{{o1.imagem.url}}" width="100%" >
                                </div>

                                <div class="col-md-10">
                                    {{o1.descricao}}
                                </div>
                            </div>
                        </div>
                        <br>
                    {% endif %}
                {% endfor %}

            </div>

        </div>
        <br>
        {% endfor %}

    </div>








    <div class="modal fade" id="modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">

                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body">

                        <h4 class="titulo">Adicionar refeição</h4>

                        <button type="button" onclick="exibe_refeicao()" class="btn btn-outline-success">
                            + Nova refeição
                        </button>

                        <button style="margin-left: 10px;" type="button" onclick="exibe_opcao()" class="btn btn-outline-success" >
                            + Nova opção
                        </button>
                        <br>
                        <br>

                        <div id="form-refeicao" style="display: block;">
                            <form action="{% url 'refeicao' paciente.id %}" method="POST">{% csrf_token %}
                                <label for="validationServerUsername">Título</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" placeholder="Ex: Café da manhã" name="titulo">
                                </div>
                                <br>
                                <label for="validationServerUsername">Horário</label>
                                <div class="input-group">
                                    <input type="time" class="form-control" placeholder="-" name="horario">
                                </div>
                                <br>
                                <h5 class="titulo">Macronutrientes</h5>
                                <div class="container">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <label for="validationServerUsername">Carboidratos</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" placeholder="" name="carboidratos">
                                            </div>
                                        </div>

                                        <div class="col-md-4">
                                            <label for="validationServerUsername">Proteínas</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" placeholder="" name="proteinas">
                                            </div>
                                        </div>

                                        <div class="col-md-4">
                                            <label for="validationServerUsername">Gorduras</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" placeholder="" name="gorduras">
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <br>
                                <input type="submit" value="Cadastrar" class="btn btn-success">
                            </form>
                        </div>




                        <div id="form-opcao" style="display: block;">
<!--                        Enviar arquivos dentro da tag do form   enctype='multipart/form-data'-->
                            <form action="{% url 'opcao' paciente.id %}" method="POST" enctype='multipart/form-data'>{% csrf_token %}

                                <label for="validationServerUsername">Selecione a refeição</label>
                                <div class="input-group">
                                    <select class="form-control" name="refeicao">
                                        {% for re in refeicao %}
                                        <option value="{{re.id}}">{{re.titulo}}</option>
                                        {% endfor %}
                                    </select>
                                </div>

                                <br>

                                <label for="validationServerUsername">Imagem</label>
                                <div class="input-group">
                                    <input type="file" class="form-control" placeholder="" name="imagem">
                                </div>

                                <br>

                                <label for="validationServerUsername">Descrição</label>
                                <div class="input-group">
                                    <textarea class="form-control" name='descricao'>

                                    </textarea>
                                </div>
                                <br>
                                <input type="submit" value="Cadastrar" class="btn btn-success">
                            </form>
                        </div>




                    </form>
                </div>

            </div>
        </div>
    </div>


{% endblock%}